<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1.0">
<style> canvas { border: 0; image-rendering: pixelated;} </style>
</head>
<body>

<canvas id="graphics" width="512" height="512"></canvas>

<script>
    const c = document.getElementById("graphics");  const ctx = c.getContext("2d");
    const triangles = [
    {x0: 0, y0: 0, x1: 270, y1: 190, x2: 100, y2: 150, color: "#f00"},
    {x0: 50, y0: 200, x1: 150, y1: 250, x2: 100, y2: 300, color: "#00f"},
    {x0:5, y0:20, x1:15, y1:25, x2:10, y2:30, color:"#0f0"}
];
    for (let i = 0; i < triangles.length; i++) {
        const triangle = triangles[i];

        // Draw filled triangle
        let p = [];
        for (let j = 0; j < 3; j++) {
            drawLine(triangle["x" + j], triangle["y" + j], triangle["x" + ((j + 1) % 3)], triangle["y" + ((j + 1) % 3)], p);
        }
        let [minY, maxY] = [Math.min(triangle.y0, triangle.y1, triangle.y2), Math.max(triangle.y0, triangle.y1, triangle.y2)];
        for (let y = minY; y <= maxY; y++) {

             // let r = p.filter(q => q.y === y);
            let r = [];
            for (const q of p) {
                if (q.y === y) {
                    r.push(q);
                }
            }

            if (r.length >= 2) {

             //   let s = r.sort((a, b) => a.x - b.x);
             //   let s = []; r.forEach(e => s.splice(s.findIndex(f => f.x > e.x), 0, e));
            let s = [];
            for (const e of r) {
                let i = 0;
                while (i < s.length && s[i].x < e.x) i++;
                s.splice(i, 0, e);
            }

                let [x, z] = [s[0].x, s[s.length - 1].x];
                ctx.fillStyle = triangle.color; ctx.fillRect(x, y, z - x + 1, 1);
            }
        }

        // Draw outlined triangle
        const { x0, y0, x1, y1, x2, y2 } = triangle; const outlinePixels = [];
        drawLine(x0, y0, x1, y1, outlinePixels);
        drawLine(x1, y1, x2, y2, outlinePixels);
        drawLine(x2, y2, x0, y0, outlinePixels);
        ctx.fillStyle = triangle.color;  ctx.fillStyle = "#000000";
        outlinePixels.forEach(pixel => {
            ctx.fillRect(pixel.x, pixel.y, 1, 1);
        });
        
    }
    
    function drawLine(x0, y0, x1, y1, p) {
        let [dx, dy, sx, sy, err, x, y] = [Math.abs(x1 - x0), Math.abs(y1 - y0), Math.sign(x1 - x0), Math.sign(y1 - y0), Math.abs(x1 - x0) - Math.abs(y1 - y0), x0, y0];
        while (true) {
            p.push({ x, y });
            if (x === x1 && y === y1) break;
            const e2 = 2 * err;
            if (e2 > -dy) { err -= dy; x += sx; }
            if (e2 < dx) { err += dx; y += sy; }
        }
    }
</script>
</body>
</html>